!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.svgSlider=e()}(this,function(){var t={light:{bg_color:"#E0E0E0",bg_border_color:"#BDBDBD",track_bg_color:"#D0D0D0",track_bg_border_color:"#FFFFFF",track_color_init:"#64B5F6",track_color:"#42A5F5",cursor_color_init:"#64B5F6",cursor_color:"#3CA0F0",markers_color:"#AAAAAA",font_color:"#424242"},light2:{bg_color:"#B1DAEE",bg_border_color:"#569DC0",track_bg_color:"#B1DAEE",track_bg_border_color:"#888",track_color_init:"#569DC0",track_color:"#1D6D93",cursor_color_init:"#569DC0",cursor_color:"#1D6D93",markers_color:"#3680A4",font_color:"#1D6D93"},dark:{bg:!1,track_bg:!0,track:!0,cursor:!0,bg_color:"#333",bg_border_color:"#888",track_bg_color:"#555",track_bg_border_color:"#373738",track_color_init:"#999",track_color:"#bbb",cursor_color_init:"#999",cursor_color:"#d3d347",markers_color:"#999",font_color:"#FFEA00"}};return function(e,r){if(void 0===r&&(r={}),!e)throw"You must pass a DOM node reference to the slider constructor";var o,n=!1,l="http://www.w3.org/2000/svg",c=100;("string"==typeof e||e instanceof String)&&(e=document.querySelector(e)),"svg"===e.nodeName.toLowerCase()?o=e:(o=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.appendChild(o));var i={width:20,bg_width:20,bg_border_width:1,markers:4,markers_length:18,markers_width:1,track_bg_offset:5,track_bg_length:90,track_bg_width:8,track_bg_radius:3,track_bg_border_width:2,track_offset:5,track_length:90,track_width:6,track_radius:3,cursor_width:14,cursor_height:6,cursor_border_width:0,cursor_radius:2,default_value:0,initial_value:0,value_min:0,value_max:100,value_resolution:1,palette:"light",bg:!1,track_bg:!0,track:!0,cursor:!0,linecap:"butt",value_text:!0,format:function(t){return t},font_family:"sans-serif",font_size:25,font_weight:"bold",class_bg:"slider-bg",class_track_bg:"slider-track-bg",class_track:"slider-track",class_value:"slider-value",class_cursor:"slider-cursor",class_markers:"slider-markers",snap_to_steps:!1,mouse_wheel_acceleration:1,onchange:null},s=JSON.parse(e.dataset.config||"{}"),u=Object.assign({},i,t[i.palette],r,s),a=Object.assign(u,t[u.palette],r,s);o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),o.setAttributeNS(null,"viewBox","0 0 "+a.width+" "+c);var _,d,b=0,g=null,h=null,k=null,f=null,m=null;function v(){A(a.initial_value?a.initial_value:a.default_value)}function w(t){return function(t){return null===a.value_resolution?t:Math.round(t/a.value_resolution)*a.value_resolution}((void 0===t?b:t)/a.track_length*(a.value_max-a.value_min)+a.value_min)}function A(t){return p((t-a.value_min)/(a.value_max-a.value_min)*a.track_length),!0}function p(t,r){var o=b,l=r&&t!==b;b=Math.min(Math.max(t,0),a.track_length),l&&w(o)!==w()&&function(){n&&console.log("slider value has changed");var t=w(),r=new CustomEvent("change",{detail:t});e.dispatchEvent(r),a.onchange&&a.onchange(t)}()}function S(t){p(y((t.clientY-_.top)/_.height*c+a.track_offset),!0)}function N(t){t.preventDefault(),S(t),B()}function D(){n&&console.log("endDrag"),document.removeEventListener("mousemove",N,!1),document.removeEventListener("mouseup",D,!1)}function E(t){n&&console.log("handleTouch",t.touches),t.preventDefault(),p(y((t.touches[t.touches.length-1].clientY-_.top)/_.height*c+a.track_offset),!0),B()}function x(){n&&console.log("endTouch"),document.removeEventListener("touchmove",E),document.removeEventListener("touchend",x)}function y(t){return Math.min(Math.max(c-t,0),c)}function C(){a.track&&(k||((k=document.createElementNS(l,"rect")).setAttributeNS(null,"x",""+(a.width-a.track_width)/2),k.setAttributeNS(null,"width",""+a.track_width),k.setAttributeNS(null,"rx",""+a.track_radius),k.setAttributeNS(null,"ry",""+a.track_radius),k.setAttribute("stroke-width","0"),k.setAttribute("fill",""+a.track_color),k.setAttribute("class",a.class_track),o.appendChild(k)),k.setAttributeNS(null,"y",""+y(a.track_offset+b+a.track_radius)),k.setAttributeNS(null,"height",""+(b+2*+a.track_radius)))}function L(){a.cursor&&(f||((f=document.createElementNS(l,"rect")).setAttributeNS(null,"x",""+(a.width-a.cursor_width)/2),f.setAttributeNS(null,"width",""+a.cursor_width),f.setAttributeNS(null,"height",""+a.cursor_height),f.setAttributeNS(null,"rx",""+a.cursor_radius),f.setAttributeNS(null,"ry",""+a.cursor_radius),f.setAttribute("stroke-width","0"),f.setAttribute("fill",""+a.cursor_color),f.setAttribute("class",a.class_cursor),o.appendChild(f)),f.setAttributeNS(null,"y",""+y(a.track_offset+a.cursor_height/2+b)))}function F(){a.bg&&((g=document.createElementNS(l,"rect")).setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y","0"),g.setAttributeNS(null,"width",""+a.width),g.setAttributeNS(null,"height",""+c),g.setAttributeNS(null,"rx","0"),g.setAttributeNS(null,"ry","0"),g.setAttribute("fill",""+a.bg_color),g.setAttribute("stroke",""+a.bg_border_color),g.setAttribute("stroke-width",""+a.bg_border_width),g.setAttribute("class",a.class_bg),o.appendChild(g)),function(){if(a.markers){for(var t=(a.width-a.markers_length)/2,e=t+a.markers_length,r="",c=a.markers,i=0;i<=c;i++){var s=y(a.track_offset+a.track_length/c*i);n&&console.log("M "+t+","+s+" L "+e+","+s+" "),r+="M "+t+","+s+" L "+e+","+s+" "}(m=document.createElementNS(l,"path")).setAttributeNS(null,"d",r),m.setAttribute("stroke",""+a.markers_color),m.setAttribute("stroke-width",""+a.markers_width),m.setAttribute("stroke-linecap",a.linecap),m.setAttribute("class",a.class_markers),o.appendChild(m)}}(),a.track_bg&&((h=document.createElementNS(l,"rect")).setAttributeNS(null,"x",""+(a.width-a.track_bg_width)/2),h.setAttributeNS(null,"y",""+y(a.track_bg_offset+a.track_bg_length+a.track_bg_radius)),h.setAttributeNS(null,"width",""+a.track_bg_width),h.setAttributeNS(null,"height",""+(a.track_bg_length+2*a.track_bg_radius)),h.setAttributeNS(null,"rx",""+a.track_bg_radius),h.setAttributeNS(null,"ry",""+a.track_bg_radius),h.setAttribute("stroke",""+a.track_bg_border_color),h.setAttribute("stroke-width",""+a.track_bg_border_width),h.setAttribute("fill",""+a.track_bg_color),h.setAttribute("class",a.class_track_bg),o.appendChild(h)),C(),L()}function B(){n&&console.log("redraw"),C(),L()}return v(),F(),o.addEventListener("mousedown",function(t){!function(t){n&&console.log("startDrag"),t.preventDefault(),_=o.getBoundingClientRect(),document.addEventListener("mousemove",N,!1),document.addEventListener("mouseup",D,!1),S(t),B()}(t)}),o.addEventListener("wheel",function(t){!function(t){t.preventDefault();var e=t.deltaY;0!==e&&(d>Math.abs(e)||!d)&&(d=Math.abs(e)),p(b+e/d*1*a.mouse_wheel_acceleration,!0),B()}(t)}),o.addEventListener("touchstart",function(t){n&&console.log("startTouch"),t.preventDefault(),_=o.getBoundingClientRect(),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("touchend",x)},{passive:!1}),{set value(t){A(t),B()},set config(t){a=Object.assign({},i,r,t),v(),F()},enableDebug:function(){n=!0,console.log("debug enabled")},disableDebug:function(){n=!1}}}});
//# sourceMappingURL=index.umd.js.map
