var t={light:{bg_color:"#E0E0E0",bg_border_color:"#BDBDBD",track_bg_color:"#D0D0D0",track_bg_border_color:"#FFFFFF",track_color_init:"#64B5F6",track_color:"#42A5F5",cursor_color_init:"#64B5F6",cursor_color:"#3CA0F0",markers_color:"#AAAAAA",font_color:"#424242"},light2:{bg_color:"#B1DAEE",bg_border_color:"#569DC0",track_bg_color:"#B1DAEE",track_bg_border_color:"#888",track_color_init:"#569DC0",track_color:"#1D6D93",cursor_color_init:"#569DC0",cursor_color:"#1D6D93",markers_color:"#3680A4",font_color:"#1D6D93"},dark:{bg:!1,track_bg:!0,track:!0,cursor:!0,bg_color:"#333",bg_border_color:"#888",track_bg_color:"#555",track_bg_border_color:"#373738",track_color_init:"#999",track_color:"#bbb",cursor_color_init:"#999",cursor_color:"#d3d347",markers_color:"#999",font_color:"#FFEA00"}};module.exports=function(e,r){if(void 0===r&&(r={}),!e)throw"You must pass a DOM node reference to the slider constructor";var o,l=!1,n="http://www.w3.org/2000/svg",c=100;("string"==typeof e||e instanceof String)&&(e=document.querySelector(e)),"svg"===e.nodeName.toLowerCase()?o=e:(o=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.appendChild(o));var s={width:20,bg_width:20,bg_border_width:1,markers:4,markers_length:18,markers_width:1,track_bg_offset:5,track_bg_length:90,track_bg_width:8,track_bg_radius:3,track_bg_border_width:2,track_offset:5,track_length:90,track_width:6,track_radius:3,cursor_width:14,cursor_height:6,cursor_border_width:0,cursor_radius:2,default_value:0,initial_value:0,value_min:0,value_max:100,value_resolution:1,palette:"light",bg:!1,track_bg:!0,track:!0,cursor:!0,linecap:"butt",value_text:!0,format:function(t){return t},font_family:"sans-serif",font_size:25,font_weight:"bold",class_bg:"slider-bg",class_track_bg:"slider-track-bg",class_track:"slider-track",class_value:"slider-value",class_cursor:"slider-cursor",class_markers:"slider-markers",snap_to_steps:!1,mouse_wheel_acceleration:1,onchange:null},a=JSON.parse(e.dataset.config||"{}"),u=Object.assign({},s,t[s.palette],r,a),i=Object.assign(u,t[u.palette],r,a);o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),o.setAttributeNS(null,"viewBox","0 0 "+i.width+" "+c);var _,d,b=0,g=null,h=null,k=null,m=null,f=null;function v(){A(i.initial_value?i.initial_value:i.default_value)}function w(t){return function(t){return null===i.value_resolution?t:Math.round(t/i.value_resolution)*i.value_resolution}((void 0===t?b:t)/i.track_length*(i.value_max-i.value_min)+i.value_min)}function A(t){return p((t-i.value_min)/(i.value_max-i.value_min)*i.track_length),!0}function p(t,r){var o=b,n=r&&t!==b;b=Math.min(Math.max(t,0),i.track_length),n&&w(o)!==w()&&function(){l&&console.log("slider value has changed");var t=w(),r=new CustomEvent("change",{detail:t});e.dispatchEvent(r),i.onchange&&i.onchange(t)}()}function S(t){p(C((t.clientY-_.top)/_.height*c+i.track_offset),!0)}function N(t){t.preventDefault(),S(t),B()}function D(){l&&console.log("endDrag"),document.removeEventListener("mousemove",N,!1),document.removeEventListener("mouseup",D,!1)}function E(t){l&&console.log("handleTouch",t.touches),t.preventDefault(),p(C((t.touches[t.touches.length-1].clientY-_.top)/_.height*c+i.track_offset),!0),B()}function x(){l&&console.log("endTouch"),document.removeEventListener("touchmove",E),document.removeEventListener("touchend",x)}function C(t){return Math.min(Math.max(c-t,0),c)}function L(){i.track&&(k||((k=document.createElementNS(n,"rect")).setAttributeNS(null,"x",""+(i.width-i.track_width)/2),k.setAttributeNS(null,"width",""+i.track_width),k.setAttributeNS(null,"rx",""+i.track_radius),k.setAttributeNS(null,"ry",""+i.track_radius),k.setAttribute("stroke-width","0"),k.setAttribute("fill",""+i.track_color),k.setAttribute("class",i.class_track),o.appendChild(k)),k.setAttributeNS(null,"y",""+C(i.track_offset+b+i.track_radius)),k.setAttributeNS(null,"height",""+(b+2*+i.track_radius)))}function F(){i.cursor&&(m||((m=document.createElementNS(n,"rect")).setAttributeNS(null,"x",""+(i.width-i.cursor_width)/2),m.setAttributeNS(null,"width",""+i.cursor_width),m.setAttributeNS(null,"height",""+i.cursor_height),m.setAttributeNS(null,"rx",""+i.cursor_radius),m.setAttributeNS(null,"ry",""+i.cursor_radius),m.setAttribute("stroke-width","0"),m.setAttribute("fill",""+i.cursor_color),m.setAttribute("class",i.class_cursor),o.appendChild(m)),m.setAttributeNS(null,"y",""+C(i.track_offset+i.cursor_height/2+b)))}function y(){i.bg&&((g=document.createElementNS(n,"rect")).setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y","0"),g.setAttributeNS(null,"width",""+i.width),g.setAttributeNS(null,"height",""+c),g.setAttributeNS(null,"rx","0"),g.setAttributeNS(null,"ry","0"),g.setAttribute("fill",""+i.bg_color),g.setAttribute("stroke",""+i.bg_border_color),g.setAttribute("stroke-width",""+i.bg_border_width),g.setAttribute("class",i.class_bg),o.appendChild(g)),function(){if(i.markers){for(var t=(i.width-i.markers_length)/2,e=t+i.markers_length,r="",c=i.markers,s=0;s<=c;s++){var a=C(i.track_offset+i.track_length/c*s);l&&console.log("M "+t+","+a+" L "+e+","+a+" "),r+="M "+t+","+a+" L "+e+","+a+" "}(f=document.createElementNS(n,"path")).setAttributeNS(null,"d",r),f.setAttribute("stroke",""+i.markers_color),f.setAttribute("stroke-width",""+i.markers_width),f.setAttribute("stroke-linecap",i.linecap),f.setAttribute("class",i.class_markers),o.appendChild(f)}}(),i.track_bg&&((h=document.createElementNS(n,"rect")).setAttributeNS(null,"x",""+(i.width-i.track_bg_width)/2),h.setAttributeNS(null,"y",""+C(i.track_bg_offset+i.track_bg_length+i.track_bg_radius)),h.setAttributeNS(null,"width",""+i.track_bg_width),h.setAttributeNS(null,"height",""+(i.track_bg_length+2*i.track_bg_radius)),h.setAttributeNS(null,"rx",""+i.track_bg_radius),h.setAttributeNS(null,"ry",""+i.track_bg_radius),h.setAttribute("stroke",""+i.track_bg_border_color),h.setAttribute("stroke-width",""+i.track_bg_border_width),h.setAttribute("fill",""+i.track_bg_color),h.setAttribute("class",i.class_track_bg),o.appendChild(h)),L(),F()}function B(){l&&console.log("redraw"),L(),F()}return v(),y(),o.addEventListener("mousedown",function(t){!function(t){l&&console.log("startDrag"),t.preventDefault(),_=o.getBoundingClientRect(),document.addEventListener("mousemove",N,!1),document.addEventListener("mouseup",D,!1),S(t),B()}(t)}),o.addEventListener("wheel",function(t){!function(t){t.preventDefault();var e=t.deltaY;0!==e&&(d>Math.abs(e)||!d)&&(d=Math.abs(e)),p(b+e/d*1*i.mouse_wheel_acceleration,!0),B()}(t)}),o.addEventListener("touchstart",function(t){l&&console.log("startTouch"),t.preventDefault(),_=o.getBoundingClientRect(),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("touchend",x)},{passive:!1}),{set value(t){A(t),B()},set config(t){i=Object.assign({},s,r,t),v(),y()},enableDebug:function(){l=!0,console.log("debug enabled")},disableDebug:function(){l=!1}}};
//# sourceMappingURL=main.js.map
